CREATE TABLE language_level (
                                id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                                code  VARCHAR(20)  NOT NULL UNIQUE,
                                label VARCHAR(100) NOT NULL
);


CREATE TABLE greeting_context (
                                  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                                  code        VARCHAR(50)  NOT NULL UNIQUE,
                                  description VARCHAR(255) NOT NULL
);

CREATE TABLE locale_tag (
                            id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                            tag      VARCHAR(20) NOT NULL UNIQUE,
                            language VARCHAR(8)  NOT NULL,
                            script   VARCHAR(8),
                            region   VARCHAR(8)
);

CREATE TABLE greeting_lexicon (
                                  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                                  locale_id   BIGINT NOT NULL,
                                  level_id    BIGINT NOT NULL,
                                  context_id  BIGINT NOT NULL,
                                  base_text   VARCHAR(255) NOT NULL,
                                  CONSTRAINT uk_greeting_lexicon UNIQUE (locale_id, level_id, context_id),
                                  CONSTRAINT fk_glex_locale  FOREIGN KEY (locale_id)  REFERENCES locale_tag(id)        ON DELETE RESTRICT,
                                  CONSTRAINT fk_glex_level   FOREIGN KEY (level_id)   REFERENCES language_level(id)    ON DELETE RESTRICT,
                                  CONSTRAINT fk_glex_context FOREIGN KEY (context_id) REFERENCES greeting_context(id)  ON DELETE RESTRICT
);

CREATE INDEX idx_glex_locale  ON greeting_lexicon(locale_id);
CREATE INDEX idx_glex_level   ON greeting_lexicon(level_id);
CREATE INDEX idx_glex_context ON greeting_lexicon(context_id);
